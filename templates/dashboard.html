{% extends "base.html" %}
{% block content %}
<h1 class="page-title">Dashboard</h1>
<section class="grid">

  <!-- Resumes Section -->
  <div class="card">
    <div class="card-head">
      <h2>Resumes</h2>
      <a class="btn" href="{{ url_for('resume_bp.new') }}">+ New Resume</a>
    </div>
    <ul>
      {% for r in resumes %}
        <li>
          <strong>{{ r.title }}</strong> —
          <a href="{{ url_for('resume_bp.editor', resume_id=r.id) }}">Edit</a> ·
          <a href="{{ url_for('resume_bp.export', resume_id=r.id, fmt='pdf') }}">PDF</a> ·
          <a href="{{ url_for('resume_bp.export', resume_id=r.id, fmt='docx') }}">DOCX</a> ·
          <a href="{{ url_for('resume_bp.export', resume_id=r.id, fmt='txt') }}">TXT</a>
          <form style="display:inline" method="post" action="{{ url_for('resume_bp.delete', resume_id=r.id) }}">
            <button class="link danger" onclick="return confirm('Delete resume?')">Delete</button>
          </form>
        </li>
      {% else %}
        <li>No resumes yet.</li>
      {% endfor %}
    </ul>
  </div>

  <!-- Cover Letters Section -->
  <div class="card">
    <div class="card-head">
      <h2>Cover Letters</h2>
      <a class="btn" href="{{ url_for('cover_bp.new') }}">+ New Cover Letter</a>
    </div>
    <ul>
      {% for c in covers %}
        <li><strong>{{ c.title }}</strong> — <a href="{{ url_for('cover_bp.edit', cl_id=c.id) }}">Edit</a></li>
      {% else %}
        <li>No cover letters yet.</li>
      {% endfor %}
    </ul>
  </div>

  <!-- Job Tracker Section -->
  <div class="card">
    <div class="card-head">
      <h2>Job Tracker</h2>
      <a class="btn" href="{{ url_for('jobs.board') }}">Open</a>
    </div>
    <ul>
      {% for j in jobs %}
        <li><strong>{{ j.title }}</strong> @ {{ j.company or '—' }}</li>
      {% else %}
        <li>No jobs yet.</li>
      {% endfor %}
    </ul>
  </div>

</section>

<style>
.grid {
  display: flex;
  justify-content: space-around;
  flex-wrap: wrap;
  gap: 20px;
  margin-top: 40px;
}
.card {
  border: 1px solid #ccc;
  padding: 20px;
  width: 300px;
  border-radius: 8px;
  background-color: #f7f7f7;
}
.card-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.btn {
  text-decoration: none;
  background-color: #007BFF;
  color: white;
  padding: 5px 10px;
  border-radius: 4px;
}
.btn:hover {
  background-color: #0056b3;
}
.link.danger {
  background: none;
  border: none;
  color: red;
  cursor: pointer;
}
</style>
{% endblock %}
